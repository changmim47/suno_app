<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Suno 프롬프트 빌더</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Noto Sans KR', sans-serif;
      background: linear-gradient(135deg, #e0e7ff 0%, #f0f9ff 100%);
      color: #1e293b;
      min-height: 100vh;
    }
    .glass {
      background: rgba(255, 255, 255, 0.8);
      backdrop-filter: blur(8px);
      border: 1px solid rgba(255, 255, 255, 0.3);
      box-shadow: 0 8px 24px rgba(0,0,0,0.05);
    }
    .chip {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 6px 12px;
      border-radius: 9999px;
      border: 1px solid #cbd5e1;
      background-color: white;
      color: #334155;
      font-size: 0.875rem;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s ease;
    }
    .chip:hover { background-color: #f1f5f9; transform: scale(1.05); }
    .chip.selected {
      background: linear-gradient(135deg, #6366f1, #3b82f6);
      color: white;
      border-color: transparent;
      box-shadow: 0 2px 8px rgba(99,102,241,0.3);
    }
    #tag-scroll { height: calc(100vh - 180px); overflow-y: auto; padding-right: 8px; }
    #tag-scroll::-webkit-scrollbar { width: 6px; }
    #tag-scroll::-webkit-scrollbar-thumb { background-color: #cbd5e1; border-radius: 3px; }
    #tag-scroll::-webkit-scrollbar-thumb:hover { background-color: #94a3b8; }
    textarea { resize: none; transition: 0.3s; }
    textarea:focus { outline: none; box-shadow: 0 0 0 3px rgba(99,102,241,0.3); }
    button.action {
      background: linear-gradient(135deg, #6366f1, #3b82f6);
      color: white;
      font-weight: 600;
      border: none;
      border-radius: 0.75rem;
      padding: 0.5rem 1rem;
      transition: 0.2s;
    }
    button.action:hover { opacity: 0.9; transform: scale(1.03); }
  </style>
</head>

<body>
  <div class="max-w-7xl mx-auto px-4 py-6">
    <!-- HEADER -->
    <header class="flex flex-col md:flex-row justify-between items-center gap-3 mb-6">
      <h1 class="text-3xl font-bold flex items-center gap-3 text-indigo-600 drop-shadow-sm">
        🎧 <span>Suno 프롬프트 빌더</span>
      </h1>
      <div class="flex gap-2 flex-wrap">
        <button id="btn-contrast" class="glass px-3 py-2 rounded-lg hover:bg-indigo-50">고대비</button>
        <button id="btn-random" class="glass px-3 py-2 rounded-lg hover:bg-indigo-50">랜덤</button>
        <button id="btn-clear" class="glass px-3 py-2 rounded-lg hover:bg-indigo-50">초기화</button>
        <button id="btn-export" class="glass px-3 py-2 rounded-lg hover:bg-indigo-50">내보내기</button>
        <label class="glass px-3 py-2 rounded-lg hover:bg-indigo-50 cursor-pointer">
          가져오기
          <input id="file-import" type="file" accept="application/json" class="hidden" />
        </label>
      </div>
    </header>

    <!-- MAIN GRID -->
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
      <!-- TAG AREA -->
      <div id="tag-scroll" class="glass rounded-2xl p-5 lg:col-span-2">
        <h2 class="text-xl font-semibold mb-4 text-slate-700">🎨 태그 선택</h2>

        <!-- PRESETS -->
        <div id="presets" class="grid sm:grid-cols-2 lg:grid-cols-3 gap-3 mb-6"></div>

        <!-- TAG SECTIONS -->
        <div id="tag-sections" class="grid md:grid-cols-2 gap-6 mb-6"></div>

        <!-- ✅ 추가된 사운드 설정 -->
        <div class="border-t border-indigo-100 pt-4">
          <h3 class="text-lg font-semibold text-indigo-700 mb-3">🎧 사운드 설정</h3>
          <div class="space-y-4">
            <div>
              <label class="font-medium text-slate-700">BPM: <span id="bpmValue">72</span></label>
              <input id="bpm" type="range" min="50" max="160" value="72" class="w-full accent-indigo-500">
            </div>
            <div>
              <label class="font-medium text-slate-700">길이(초): <span id="lenValue">120</span></label>
              <input id="length" type="range" min="30" max="240" value="120" class="w-full accent-indigo-500">
            </div>
            <div class="flex flex-wrap gap-4 text-slate-700">
              <label><input type="checkbox" id="vinyl" class="mr-1 accent-indigo-500">비닐 크랙/레인 사운드 포함</label>
              <label><input type="checkbox" id="instrumental" checked class="mr-1 accent-indigo-500">보컬 없음 (Instrumental)</label>
            </div>
          </div>
        </div>
      </div>

      <!-- PROMPT AREA -->
      <div class="lg:sticky lg:top-6 h-fit">
        <section class="glass rounded-2xl p-5 shadow-md">
          <div class="mb-4 border-b border-slate-200 pb-3">
            <h3 class="text-lg font-semibold flex items-center gap-2 text-indigo-700">
              🧾 <span>생성된 프롬프트</span>
            </h3>
          </div>

          <div class="relative mb-4">
            <textarea id="prompt"
              class="w-full h-64 p-4 rounded-xl border border-indigo-100 bg-indigo-50/40 text-slate-800
                     focus:outline-none focus:ring-2 focus:ring-indigo-300 focus:bg-white transition duration-200 ease-in-out"
              placeholder="태그를 선택하면 프롬프트가 표시됩니다."></textarea>
            <div class="absolute inset-0 rounded-xl pointer-events-none shadow-inner shadow-slate-200"></div>
          </div>

          <div class="flex justify-end gap-2">
            <button id="btn-copy" class="action w-28 text-sm font-semibold leading-tight">프롬프트<br>복사</button>
            <button id="btn-copy-title" class="action w-28 text-sm font-semibold leading-tight bg-sky-500 hover:bg-sky-600">제목<br>복사</button>
            <button id="btn-copy-both" class="action w-28 text-sm font-semibold leading-tight bg-violet-500 hover:bg-violet-600">둘 다<br>복사</button>
          </div>
        </section>
      </div>
    </div>
  </div>

  <script>
    const el = s => document.querySelector(s);

    // =============== 데이터 ===============
    const moods = ['calm','dreamy','nostalgic','cozy','melancholic','uplifting','romantic','sentimental','hopeful','lonely','ambient','cinematic','epic','mystical','eerie','dramatic','dark','bright','energetic','relaxing','peaceful','retro','vintage','futuristic','minimalistic','lofi','chill','groovy','cool'];
    const genres = ['lofi','chillhop','jazzhop','ambient','cinematic','synthwave','retrowave','house','deep house','tropical house','future bass','trap','hiphop','boom bap','r&b','neo soul','pop','acoustic','folk','indie','orchestral','soundtrack','piano solo','instrumental ballad'];
    const instruments = ['piano','electric piano','grand piano','acoustic guitar','electric guitar','jazz guitar','bass guitar','warm bass','synth bass','soft drums','acoustic drums','lofi drum kit','analog synth','pad','strings','violin','flute','saxophone','808'];
    const textures = ['vinyl crackle','tape hiss','analog warmth','room reverb','tape saturation','soft distortion','rain ambience','wind ambience','city ambience'];
    const grooves = ['steady 4/4','slow swing','bossa nova','trip-hop','boom bap','uptempo 2-step','groovy funk','half-time beat'];
    const tones = ['warm','bright','dark','soft','crisp','dusty','clear','smooth','thick','airy','vintage','modern'];
    const themes = ['morning coffee','rainy night','midnight drive','study time','focus mode','sunset chill','reading time','dreamscape','city lights','road trip'];
    const tags = { moods, genres, instruments, textures, grooves, tones, themes };

    const labelMap = {
    // moods
    calm: '잔잔한', dreamy: '몽환적인', nostalgic: '향수 어린', cozy: '포근한', melancholic: '우울한',
    uplifting: '희망찬', romantic: '로맨틱한', sentimental: '센치한', hopeful: '희망적인', lonely: '외로운',
    ambient: '고요한', cinematic: '시네마틱', epic: '웅장한', mystical: '신비로운', eerie: '오싹한',
    dramatic: '드라마틱', dark: '어두운', bright: '밝은', energetic: '에너제틱', relaxing: '편안한',
    peaceful: '평화로운', retro: '레트로', vintage: '빈티지', futuristic: '미래지향', minimalistic: '미니멀',
    lofi: '로파이', chill: '칠', groovy: '그루비', cool: '쿨',

    // genres
    chillhop: '칠합', jazzhop: '재즈합', ambient: '앰비언트', cinematic: '시네마틱',
    synthwave: '신스웨이브', retrowave: '레트로웨이브', house: '하우스',
    'deep house': '딥하우스', 'tropical house': '트로피컬 하우스', 'future bass': '퓨처베이스',
    trap: '트랩', hiphop: '힙합', 'boom bap': '붐뱁', 'r&b': '알앤비', 'neo soul': '네오소울',
    pop: '팝', acoustic: '어쿠스틱', folk: '포크', indie: '인디', orchestral: '오케스트라',
    soundtrack: '사운드트랙', 'piano solo': '피아노 솔로', 'instrumental ballad': '연주 발라드',

    // instruments
    piano: '피아노', 'electric piano': '일렉 피아노', 'grand piano': '그랜드 피아노',
    'acoustic guitar': '통기타', 'electric guitar': '일렉 기타', 'jazz guitar': '재즈 기타',
    'bass guitar': '베이스', 'warm bass': '웜 베이스', 'synth bass': '신스 베이스',
    'soft drums': '소프트 드럼', 'acoustic drums': '어쿠스틱 드럼', 'lofi drum kit': '로파이 드럼',
    'analog synth': '아날로그 신스', pad: '패드', strings: '스트링', violin: '바이올린',
    flute: '플루트', saxophone: '색소폰', '808': '808 베이스',

    // textures
    'vinyl crackle': '비닐 크랙', 'tape hiss': '테이프 히스', 'analog warmth': '아날로그 질감',
    'room reverb': '룸 리버브', 'tape saturation': '테이프 새츄레이션',
    'soft distortion': '소프트 디스토션', 'rain ambience': '비 사운드',
    'wind ambience': '바람 사운드', 'city ambience': '도시 사운드',

    // grooves
    'steady 4/4': '스테디 4/4', 'slow swing': '슬로우 스윙', 'bossa nova': '보사노바',
    'trip-hop': '트립합', 'boom bap': '붐뱁', 'uptempo 2-step': '업템포 2스텝',
    'groovy funk': '그루비 펑크', 'half-time beat': '하프타임 비트',

    // tones
    warm: '따뜻한 톤', bright: '밝은 톤', dark: '어두운 톤', soft: '부드러운 톤',
    crisp: '선명한 톤', dusty: '먼지 낀 톤', clear: '맑은 톤', smooth: '매끈한 톤',
    thick: '두터운 톤', airy: '공기감 톤', vintage: '빈티지 톤', modern: '모던 톤',

    // themes
    'morning coffee': '아침 커피', 'rainy night': '비 오는 밤', 'midnight drive': '자정 드라이브',
    'study time': '공부 시간', 'focus mode': '집중 모드', 'sunset chill': '노을 감성',
    'reading time': '독서 시간', dreamscape: '드림스케이프', 'city lights': '도시 불빛',
    'road trip': '로드 트립'
    };


    
    const presets = [
      { name: '공부용 Lofi', tags: ['calm','lofi','piano','warm','steady 4/4','study time'] },
      { name: '비오는 날 감성', tags: ['melancholic','jazzhop','piano','vinyl crackle','slow swing','rainy night'] },
      { name: '드라이브 Chill', tags: ['uplifting','synthwave','electric guitar','groovy funk','bright','midnight drive'] },
      { name: '시네마틱 웅장', tags: ['cinematic','strings','pad','epic','fast','dreamscape'] },
      { name: '레트로 팝', tags: ['retro','pop','bright','analog synth','steady 4/4'] },
      { name: '코지 나잇', tags: ['cozy','acoustic guitar','warm','relaxing','cozy bedroom'] }
    ];

    // =============== 상태 ===============
    const state = { selected: new Set(), bpm: 72, length: 120, vinyl: false, instrumental: true };

    // =============== 렌더링 ===============
    function renderTags() {
    const tagBox = el('#tag-sections');
    tagBox.innerHTML = '';
    Object.entries(tags).forEach(([category, list]) => {
        const sec = document.createElement('div');
        sec.innerHTML = `<h3 class="text-sm font-semibold mb-2 text-indigo-600">${category}</h3>`;
        const box = document.createElement('div');
        box.className = 'flex flex-wrap gap-2';
        list.forEach(tag => {
        const btn = document.createElement('button');
        // 👇 표시만 한글, 값은 영문 그대로 사용
        btn.textContent = labelMap[tag] || tag;
        btn.className = 'chip' + (state.selected.has(tag) ? ' selected' : '');
        btn.addEventListener('click', () => {
            if (state.selected.has(tag)) state.selected.delete(tag);
            else state.selected.add(tag);
            renderTags(); updatePrompt(); save();
        });
        box.appendChild(btn);
        });
        sec.appendChild(box);
        tagBox.appendChild(sec);
    });
    }

    function renderPresets() {
      const box = el('#presets');
      box.innerHTML = '';
      presets.forEach(p => {
        const btn = document.createElement('button');
        btn.textContent = `🎵 ${p.name}`;
        btn.className = 'glass w-full text-left px-4 py-3 rounded-xl hover:bg-indigo-50 transition';
        btn.addEventListener('click', () => {
          state.selected = new Set(p.tags);
          renderTags(); updatePrompt(); save();
        });
        box.appendChild(btn);
      });
    }

    // =============== 프롬프트 생성 ===============
    function updatePrompt() {
      const arr = [...state.selected];
      const bpm = `BPM ${state.bpm}`;
      const len = `${state.length}s`;
      const vinyl = state.vinyl ? 'with vinyl crackle / rain ambience' : '';
      const vocal = state.instrumental ? 'instrumental only' : 'with vocal';
      el('#prompt').value = arr.length
        ? `${arr.join(', ')} | ${bpm}, ${len}, ${vinyl}, ${vocal}`.trim()
        : '태그를 선택하면 프롬프트가 표시됩니다.';
    }

    // =============== 컨트롤 바인딩 ===============
    function bindControls() {
      el('#bpm').oninput = e => { state.bpm = +e.target.value; el('#bpmValue').textContent = state.bpm; updatePrompt(); };
      el('#length').oninput = e => { state.length = +e.target.value; el('#lenValue').textContent = state.length; updatePrompt(); };
      el('#vinyl').onchange = e => { state.vinyl = e.target.checked; updatePrompt(); };
      el('#instrumental').onchange = e => { state.instrumental = e.target.checked; updatePrompt(); };
    }

    // =============== 버튼/저장 관련 ===============
    function save() { localStorage.setItem('suno_tags', JSON.stringify([...state.selected])); }
    function load() { state.selected = new Set(JSON.parse(localStorage.getItem('suno_tags') || '[]')); }

    function bindButtons() {
      el('#btn-copy').onclick = () => navigator.clipboard.writeText(el('#prompt').value);
      el('#btn-copy-title').onclick = () => navigator.clipboard.writeText([...state.selected].slice(0, 3).join(' / ') || '무제');
      el('#btn-copy-both').onclick = () => navigator.clipboard.writeText([...state.selected].slice(0, 3).join(' / ') + '\n' + el('#prompt').value);
      el('#btn-clear').onclick = () => { state.selected.clear(); renderTags(); updatePrompt(); save(); };
      el('#btn-random').onclick = () => {
        const all = Object.values(tags).flat();
        const random = all.sort(() => Math.random() - 0.5).slice(0, 8);
        state.selected = new Set(random);
        renderTags(); updatePrompt(); save();
      };
      el('#btn-contrast').onclick = () => document.body.classList.toggle('invert');
      el('#btn-export').onclick = () => {
        const blob = new Blob([JSON.stringify([...state.selected], null, 2)], { type: 'application/json' });
        const a = document.createElement('a');
        a.href = URL.createObjectURL(blob);
        a.download = 'suno_tags.json';
        a.click();
      };
      el('#file-import').onchange = e => {
        const f = e.target.files[0];
        if (!f) return;
        const r = new FileReader();
        r.onload = () => { state.selected = new Set(JSON.parse(r.result)); renderTags(); updatePrompt(); save(); };
        r.readAsText(f);
      };
    }

    document.addEventListener('DOMContentLoaded', () => {
      load(); renderPresets(); renderTags(); updatePrompt(); bindButtons(); bindControls();
    });
  </script>
</body>
</html>
